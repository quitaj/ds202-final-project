## Libraries and loading data

```{r}
library(tidyverse)
library(stringr)
df = read.csv("https://raw.githubusercontent.com/wagstrom/ds-202-final-project/main/rym_top_5000_all_time.csv")
```

In this chunk we read in our data from our working repository.

## Converting to numeric

```{r}
df$Number.of.Ratings = as.numeric(gsub(",", "", df$Number.of.Ratings))
df$Ranking = as.numeric(df$Ranking)
df$Average.Rating = as.numeric(df$Average.Rating)
df$Number.of.Reviews = as.numeric(df$Number.of.Reviews)
df2 = df
```

In this chunk we set our ratings, number of ratings, rankings, and number of reviews as numerical values instead of string values.

## Converting comma-separated strings into separate columns

```{r}
df2[c('Genre_1', 'Genre_2', 'Genre_3', 'Genre_4', 'Genre_5')] <- str_split_fixed(df2$Genres, ', ', 5)
df2[c('Desc_1', 'Desc_2', 'Desc_3', 'Desc_4', 'Desc_5', 'Desc_6', 'Desc_7', 'Desc_8',
     'Desc_9', 'Desc_10')] <- str_split_fixed(df2$Descriptors, ', ', 10)
sum(df2$Desc_10 != "")
df3 = df2
```

In this chunk we are splitting our genres and descripters into different columns that makes the album values less unique.

## Add column for average score, average reviews, average ratings, and number of appearances per artist

```{r}
df3 = df3 %>%
  group_by(Artist.Name) %>%
  mutate(Artist.Average.Score = mean(Average.Rating),
         Artist.Average.Reviews = mean(Number.of.Reviews),
         Artist.Average.Ratings = mean(Number.of.Ratings),
         Artist.Frequency = nrow(as.data.frame(Artist.Name))
         )

df_final = df3
```

In this chunk we are adding columns to find the averages of scores, reviews, number of ratings, and number of appearances for each artist. We do this so we can compare the individual values easier.

## Summaries

```{r}
nrow(unique(as.data.frame(df_final$Album)))
  #Some albums have the same names
nrow(unique(as.data.frame(df_final$Artist.Name)))
  #2787 unique artists
nrow(unique(as.data.frame(df_final$Genre_1)))
  #453 unique primary genres
summary(df_final)
```

In this chunk we are exploring the data to see how many unique albums, artists, and genres in the data. We also ran a summary of the dataframe so we could view it easier.

Our project idea is as follows:

Our dataset is the list of the top 5000 rated albums on the website rateyourmusic.com. The dataset includes the ranking, album title, artist, release date, genre(s), descriptors, average rating, number of ratings, number of reviews. We have several questions we'd like to answer through statistical analysis and visualization, some of which are listed below:

-What is the relationship between the release date and the score of the album?

-What is the relationship between the number of reviews/ratings and the artist? This helps determine the relative popularity of artists on this website.

-What is the relationship between score and other variables, such as genre, descriptors, and artist?

-How do scores for genres change over time?

**Outline of Exploration:**

-What is the relationship between the release date and the score of the album? **Quita**

```{r}
library(ggplot2)
ggplot(df_final, aes(x = `Release.Date`, y = `Average.Rating`)) +
  geom_point()
```

*This scatter plots shows the relationship between the Release.Date and Average.Rating. There does not seem to be an obvious meaningful relationship between the two variables. Most of the albums have an average rating above 3.6 but the release date does not appear to impact that based on this scatter plot.*

-What is the relationship between the number of reviews/ratings and the artist? This helps determine the relative popularity of artists on this website. **Soren**

Answering this question will involve determining the average number of ratings/reviews per artist. This can be accomplished using mutate statements to create two new columns, one for average number of ratings per artist, and one for average number of reviews per artist. The number of reviews per artist will be much lower than the number of ratings, because writing a review takes much more time and effort than simply providing a score from 1-5. This is not a reflection of an artist's popularity outside the context of this website, as this is a website for dedicated fans of music, who tend to have different tastes than the general public.

-What is the relationship between score and other variables, such as genre, descriptors, and artist? **Jasper**

By answering this question we will be able to have a better idea of how albums are scored and what the stronger criterion are that affect scores for each album. First we will look for the unique values of genres, descriptors and artists to identify how many of each category we have. Once that is accomplished, we will be using the dplyr library and grouping the data by genre to graph it with the ggplot library. Using these graphs we will be able to see how different categories affect score.

-How do scores for genres change over time? **Jolie**

I will group by decade to see the change in genre over time, using plots to see the counts of the genres in each decade. Using average score of songs in each genre, we can see if there is a trend or not. Grouping the smaller categories into larger umbrella categories such as just rock, pop, etc may also make trend analysis easier.
