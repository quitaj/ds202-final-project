## Libraries and loading data

```{r}
library(tidyverse)
library(stringr)
df = read.csv("https://raw.githubusercontent.com/wagstrom/ds-202-final-project/main/rym_top_5000_all_time.csv")
```

In this chunk we read in our data from our working repository.

## Converting to numeric

```{r}
df$Number.of.Ratings = as.numeric(gsub(",", "", df$Number.of.Ratings))
df$Ranking = as.numeric(df$Ranking)
df$Average.Rating = as.numeric(df$Average.Rating)
df$Number.of.Reviews = as.numeric(df$Number.of.Reviews)
df2 = df
```

In this chunk we set our ratings, number of ratings, rankings, and number of reviews as numerical values instead of string values.

## Converting comma-separated strings into separate columns

```{r}
df2[c('Genre_1', 'Genre_2', 'Genre_3', 'Genre_4', 'Genre_5')] <- str_split_fixed(df2$Genres, ', ', 5)
df2[c('Desc_1', 'Desc_2', 'Desc_3', 'Desc_4', 'Desc_5', 'Desc_6', 'Desc_7', 'Desc_8',
     'Desc_9', 'Desc_10')] <- str_split_fixed(df2$Descriptors, ', ', 10)
sum(df2$Desc_10 != "")
df3 = df2
```

In this chunk we are splitting our genres and descripters into different columns that makes the album values less unique.

## Add column for average score, average reviews, average ratings, and number of appearances per artist

```{r}
library(lubridate)
df3 = df3 %>%
  group_by(Artist.Name) %>%
  mutate(Artist.Average.Score = mean(Average.Rating),
         Artist.Average.Reviews = mean(Number.of.Reviews),
         Artist.Average.Ratings = mean(Number.of.Ratings),
         Artist.Frequency = nrow(as.data.frame(Artist.Name))
         )

df_final = df3
```

Dealing with Dates

```{r}
Year_useful = str_sub(df_final$Release.Date,-2,-1)

library(lubridate)
Year_start = NULL
for(i in 1:5000){
  if(Year_useful[i] <  22){
    Year_start[i] = 20
    }else{
    Year_start[i] = 19
  }
}

year = data.frame(Year_start, Year_useful)

df_final$Year = paste(year$Year_start, year$Year_useful)
df_final$Year = gsub(" ", "", df_final$Year)
```

In this chunk we are adding columns to find the averages of scores, reviews, number of ratings, and number of appearances for each artist. We do this so we can compare the individual values easier.

## Summaries

```{r}
nrow(unique(as.data.frame(df_final$Album)))
  #Some albums have the same names
nrow(unique(as.data.frame(df_final$Artist.Name)))
  #2787 unique artists
nrow(unique(as.data.frame(df_final$Genre_1)))
  #453 unique primary genres
summary(df_final)
```

In this chunk we are exploring the data to see how many unique albums, artists, and genres in the data. We also ran a summary of the dataframe so we could view it easier.

Our project idea is as follows:

Our dataset is the list of the top 5000 rated albums on the website rateyourmusic.com. The dataset includes the ranking, album title, artist, release date, genre(s), descriptors, average rating, number of ratings, number of reviews. We have several questions we'd like to answer through statistical analysis and visualization, some of which are listed below:

-What is the relationship between the release date and the score of the album?

-What is the relationship between the number of reviews/ratings and the artist? This helps determine the relative popularity of artists on this website.

-What is the relationship between score and other variables, such as genre, descriptors, and artist?

-How do scores for genres change over time?

**Outline of Exploration:**

-What is the relationship between the release date and the score of the album? **Quita**

```{r}
library(ggplot2)
ggplot(df_final, aes(x=`Year` , y =`Average.Rating`, color= `Year` ))  + geom_point(size=1.25) 
```

- What are the genres that dominated each decade?

```{r}


```


-Artist that dominated the genres? 
```{r}

```


-What is the relationship between the number of reviews/ratings and the artist? This helps determine the relative popularity of artists on this website. **Soren**

Answering this question will involve determining the average number of ratings/reviews per artist. This can be accomplished using mutate statements to create two new columns, one for average number of ratings per artist, and one for average number of reviews per artist. The number of reviews per artist will be much lower than the number of ratings, because writing a review takes much more time and effort than simply providing a score from 1-5. This is not a reflection of an artist's popularity outside the context of this website, as this is a website for dedicated fans of music, who tend to have different tastes than the general public.

-How do scores for genres change over time? **Jolie**

I will group by decade to see the change in genre over time, using plots to see the counts of the genres in each decade. Using average score of songs in each genre, we can see if there is a trend or not. Grouping the smaller categories into larger umbrella categories such as just rock, pop, etc may also make trend analysis easier.

```{r}
df_final %>% group_by(Genre_1)%>% summarise(
  Average.Score = mean(Average.Rating),
  count = n()
)%>% arrange(desc(count))
```

Progressive Rock, Singer/Songwriter, Hard Bop, Film Score, Hard Rock, Heavy Metal, East Coast Hip Hop, Video Game Music, Alternative Rock, and Progressive Metal are the top ten genres the occur the most on the list.

```{r}
df_final %>% group_by(Genre_1)%>% summarise(
  Average.Score = mean(Average.Rating),
  count = n()
)%>% arrange(desc(Average.Score))
```

```{r}
df_final%>% filter(Genre_1 == "Progressive Rock"|
            Genre_1 == "Singer/Songwriter"|
            Genre_1 == "Hard Bop"|
            Genre_1 == "Film Score"|
            Genre_1 == "Hard Rock"|
            Genre_1 == "Heavy Metal"|
            Genre_1 == "East Coast Hip Hop"
            )%>% group_by(Genre_1 ,Year)%>% summarise(
  count = n()
)%>% ggplot(aes(x = Year,y = count, group = Genre_1, color = Genre_1)) + geom_line()+ theme(axis.text.x = element_text(angle = 90, size = 10))
```

From the beginning of the 50s to the end of the 60s Hard Bop Jazz dominates. The 70s is the Rock era with Progressive and Hard Rock occurring much more than any other genre. Singer/Songwriter is close to the Hard Rock. The 80s was Heavy Metal. The 90s is East Coast Hip Hop. Singer/Songwriter genre boosted in the early 2000s.

```{r}
df_final%>% filter(Genre_1 == "Hard Bop")%>% select(Genre_1,Album,Artist.Name, Year,Average.Rating)%>% arrange(desc(Average.Rating))
```

**Top Hard Bop**

Giant Steps by John Coltrane	1960, Score 4.10
Moanin' by Art Blakey and The Jazz Messengers	1959, Score 4.04

```{r}
df_final%>% filter(Genre_1 == "Progressive Rock"|Genre_1 == "Hard Rock")%>% select(Album,Artist.Name, Year,Average.Rating)%>% arrange(desc(Average.Rating))
```

**Top Progressive Rock Albums**

In the Court of the Crimson King by King Crimson, Released 1969, Score 4.30
Wish You Were Here by Pink Floyd, Released 1975, Score 4.29

**Top Hard Rock Album**

Led Zeppelin [IV] by Led Zeppelin	1971	4.10

Who's Next by The Who	1971	3.96

```{r}
df_final%>% filter(Genre_1 == "Singer/Songwriter")%>% select(Album,Artist.Name, Year,Average.Rating)%>% arrange(desc(Average.Rating))
```

Top Singer/Songwriter Albums

Blood on the Tracks	Bob Dylan	1975	4.16
Either / Or Elliott Smith	1997	4.10

```{r}
df_final%>% filter(Genre_1 == "Heavy Metal")%>% select(Album,Artist.Name, Year,Average.Rating)%>% arrange(desc(Average.Rating))
```

**Top Heavy Metal Albums**

Paranoid	Black Sabbath	1970	4.19
Master of Reality	Black Sabbath	1971	4.12
Black Sabbath	Black Sabbath	1970	4.06
Painkiller Judas Priest	1990	4.00

```{r}
df_final%>% filter(Genre_1 == "East Coast Hip Hop")%>% select(Album,Artist.Name, Year,Average.Rating)%>% arrange(desc(Average.Rating))
```

**Top East Coast Hip Hop Albums**

Illmatic	Nas	1994	4.20
Enter the Wu-Tang (36 Chambers) Wu-Tang Clan	1993	4.19

```{r}
df_final %>% group_by(Artist.Name) %>% summarize(
  Average.Score = mean(Average.Rating)
)%>% arrange(desc(Average.Score))
```

Top Artists

Mingus	4.34
The Velvet Underground & Nico 4.23	
Wu-Tang Clan	4.19
Slint	4.15
Godspeed You Black Emperor! 4.145
Television 4.13
DJ Shadow 4.11	
Genius/GZA	4.11
Milton Nascimento & LÃ´ Borges	4.10
The Zombies 4.08

-What is the relationship between score and other variables, such as genre, descriptors, and artist? **Jasper**

By answering this question we will be able to have a better idea of how albums are scored and what the stronger criterion are that affect scores for each album. First we will look for the unique values of genres, descriptors and artists to identify how many of each category we have. Once that is accomplished, we will be using the dplyr library and grouping the data by genre to graph it with the ggplot library. Using these graphs we will be able to see how different categories affect score.
